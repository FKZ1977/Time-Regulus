<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Time Regulus</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R7PW7DY4GF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-R7PW7DY4GF');
  </script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="stylesheet" href="style.css">
</head>
<body class="fade-in">
  <!-- ğŸ” ãƒ­ãƒƒã‚¯ç”»é¢ -->
  <div id="lockScreen">
    <h1 class="fkz rise-in">Time Regulus</h1>
    <p class="subtitle">ã‚¿ã‚¤ãƒ ã€€ãƒ¬ã‚°ãƒ«ã‚¹ã€€v1.4.0</p>
    <label for="passcode">æš—è¨¼ç•ªå·ã‚’å…¥åŠ›ï¼š</label><br>
    <input type="password" id="passcode" placeholder="ä¾‹ï¼š1234" tabindex="1">
    <button class="action-btn" onclick="checkPass()" tabindex="2">é–‹ã</button>

    <!-- ğŸ² ãƒ©ãƒ³ãƒ€ãƒ ãƒ†ãƒ³ã‚­ãƒ¼ -->
    <div id="keypad" class="keypad-grid"></div>

    <!-- âœ… ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºï¼ˆé«˜ã•å›ºå®šï¼‰ -->
    <p id="error"></p>
    <p class="subtitle">- produced by H.Fukazu -</p>
  </div>

  <!-- ğŸ” ãƒ¢ãƒ¼ãƒ‰é¸æŠç”»é¢ -->
  <div id="modeSelect" style="display:none; text-align:center;">
    <h1 class="fkz">Time Regulus</h1>
    <p class="subtitle">- ãƒ¢ãƒ¼ãƒ‰é¸æŠ -</p>
    <div style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: 40px;">
      <button class="action-btn" onclick="showErrorMode()" tabindex="3">èª¤å·®ã®è¨ˆç®—</button>
      <button class="action-btn" onclick="showCorrectionMode()" tabindex="4">è£œæ­£æ™‚åˆ»ã®è¨ˆç®—</button>
    </div>
  </div>

  <!-- ğŸ§® èª¤å·®è¨ˆç®—ãƒ¢ãƒ¼ãƒ‰ -->
  <div id="errorMode" style="display:none;">
    <div class="mode-card">
      <button class="back-btn" onclick="backToModeSelect()">â† ãƒ¢ãƒ¼ãƒ‰é¸æŠã«æˆ»ã‚‹</button>
      <h2>èª¤å·®ã®è¨ˆç®—</h2>

      <!-- è¡¨ç¤ºæ™‚åˆ»å…¥åŠ›æ¬„ï¼ˆå…ˆã«è¡¨ç¤ºï¼‰ -->
      <div class="input-group">
        <label>è¡¨ç¤ºæ™‚åˆ»ï¼š</label><br>
        <input type="datetime-local" id="displayTime">
        <select id="displaySeconds" class="seconds-select">
          <option value="">ç§’</option>
        </select>
      </div>

      <!-- æ¨™æº–æ™‚åˆ»å…¥åŠ›æ¬„ï¼ˆå¾Œã«è¡¨ç¤ºï¼‰ -->
      <div class="input-group">
        <label>æ¨™æº–æ™‚åˆ»ï¼š</label>
        <button class="action-btn" onclick="setNowToStandard()" style="margin-left: 8px;">NOWğŸ”„</button><br>
        <input type="datetime-local" id="standardTime">
        <select id="standardSeconds" class="seconds-select">
          <option value="">ç§’</option>
        </select>
      </div>

      <button class="action-btn" onclick="calculateError()">èª¤å·®ã‚’è¨ˆç®—</button>
      <div class="result-box" id="result"></div>
      <button class="action-btn" id="toReverseButton" onclick="switchToCorrectionMode()" style="display:none;">â‡† è£œæ­£æ™‚åˆ»ã‚’è¨ˆç®—</button>
    </div>
  </div>

  <!-- ã“ã“ã‹ã‚‰indexï¼ï¼¢ã€€--ğŸ”§ è£œæ­£ãƒ¢ãƒ¼ãƒ‰ -->
  <div id="correctionMode" class="mode-card deep-green" style="display:none;">
    <button class="back-btn" onclick="backToModeSelect()" tabindex="12">â† ãƒ¢ãƒ¼ãƒ‰é¸æŠã«æˆ»ã‚‹</button>
    <p class="subtitle">è£œæ­£æ™‚åˆ»ã®è¨ˆç®—</p>

    <label>è£œæ­£ã«ä½¿ã†èª¤å·®ï¼š</label>
    <div class="flex-wrap">
      <div class="unit-input">
        <input type="number" id="errorDays" min="0" step="1" oninput="reverseCalculate()" tabindex="13">
        <span class="unit-label">æ—¥</span>
      </div>
      <div class="unit-input">
        <select id="errorHours" onchange="reverseCalculate()" tabindex="14">
          <option value="">--</option>
        </select>
        <span class="unit-label">æ™‚</span>
      </div>
      <div class="unit-input">
        <select id="errorMinutes" onchange="reverseCalculate()" tabindex="15">
          <option value="">--</option>
        </select>
        <span class="unit-label">åˆ†</span>
      </div>
      <div class="unit-input">
        <select id="errorSeconds" onchange="reverseCalculate()" tabindex="16">
          <option value="">--</option>
        </select>
        <span class="unit-label">ç§’</span>
      </div>
    </div>

    <div class="input-group">
      <label for="errorDirection" style="display:inline-block;">è¡¨ç¤ºæ™‚åˆ»ã¯æ¨™æº–æ™‚åˆ»ã‚ˆã‚Šï¼š</label>
      <select id="errorDirection" onchange="reverseCalculate()" tabindex="17">
        <option value="late">é€²ã‚“ã§ã„ã‚‹</option>
        <option value="early">é…ã‚Œã¦ã„ã‚‹</option>
      </select>
    </div>

    <!-- â‡†å¤‰æ›ãƒœã‚¿ãƒ³ -->
    <div style="margin: 12px 0;">
      <button class="action-btn toggle-btn" onclick="toggleReverseMode()" tabindex="18">â‡†å¤‰æ›</button>
    </div>

    <!-- å…¥åŠ›æ åˆ‡ã‚Šæ›¿ãˆ -->
    <div id="reverseTimeBlock" class="input-group">
      <label id="reverseTimeLabel" for="reverseDisplayTime">è¡¨ç¤ºæ™‚åˆ»:</label><br>
      <input type="datetime-local" id="reverseDisplayTime" step="60" tabindex="19">
      <select id="reverseDisplaySeconds" class="seconds-select" tabindex="20">
        <option value="">--</option>
      </select>
    </div>

    <button id="reverseCalcButton" class="action-btn" onclick="handleReverseCalculation()" tabindex="21">è£œæ­£æ™‚åˆ»ã‚’è¨ˆç®—</button>

    <div id="reverseResult" class="result-box"></div>
  </div>

  <script src="script.js" defer></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("Service Worker registered"))
        .catch(error => console.error("Service Worker registration failed:", error));
    }
  </script>
</body>
</html>